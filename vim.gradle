// create syntastic classpath files
task vimFiles << {
	def classpathFiles = new HashSet<String>()
	def addJars = { proj ->
		proj.configurations.each { conf ->
			conf.each { jar ->
				classpathFiles.add(jar)
			}
		}
		proj.sourceSets.each { srcSet ->
			srcSet.java.srcDirs.each { dir ->
				println dir.absolutePath
				classpathFiles.add(dir.absolutePath)
			}
		}
	}
	getChildProjects().each { proj ->
		addJars(proj.value)
	}

	new File(rootProject.projectDir.absolutePath + "/.syntastic_javac_config").text = "let g:syntastic_java_javac_classpath = \"" + classpathFiles.collect().join(":") + "\""

	new File(rootProject.projectDir.absolutePath + "/.vim.local").text = """
	let g:syntastic_java_javac_config_file_enabled = 1
	"""
}

